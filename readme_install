
Authenticating with public key "feb6_2024"
Welcome to Ubuntu 24.04 LTS (GNU/Linux 6.8.0-1009-aws x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/pro

 System information as of Tue Jul 16 20:21:01 UTC 2024

  System load:  0.27              Temperature:           -273.1 C
  Usage of /:   22.7% of 6.71GB   Processes:             111
  Memory usage: 5%                Users logged in:       0
  Swap usage:   0%                IPv4 address for ens5: 172.31.31.141

Expanded Security Maintenance for Applications is not enabled.

0 updates can be applied immediately.

Enable ESM Apps to receive additional future security updates.
See https://ubuntu.com/esm or run: sudo pro status


The list of available updates is more than a week old.
To check for new updates run: sudo apt update


The programs included with the Ubuntu system are free software;
the exact distribution terms for each program are described in the
individual files in /usr/share/doc/*/copyright.

Ubuntu comes with ABSOLUTELY NO WARRANTY, to the extent permitted by
applicable law.

To run a command as administrator (user "root"), use "sudo <command>".
See "man sudo_root" for details.

ubuntu@ip-172-31-31-141:~$ ls
ubuntu@ip-172-31-31-141:~$ pwd
/home/ubuntu
ubuntu@ip-172-31-31-141:~$ lsblk
NAME         MAJ:MIN RM  SIZE RO TYPE MOUNTPOINTS
loop0          7:0    0 25.2M  1 loop /snap/amazon-ssm-agent/7993
loop1          7:1    0 55.7M  1 loop /snap/core18/2829
loop2          7:2    0 38.8M  1 loop /snap/snapd/21759
nvme1n1      259:0    0  100G  0 disk
nvme0n1      259:1    0    8G  0 disk
├─nvme0n1p1  259:2    0    7G  0 part /
├─nvme0n1p14 259:3    0    4M  0 part
├─nvme0n1p15 259:4    0  106M  0 part /boot/efi
└─nvme0n1p16 259:5    0  913M  0 part /boot
ubuntu@ip-172-31-31-141:~$ sudo mkfs.ext4 nvme1n1
mke2fs 1.47.0 (5-Feb-2023)
The file nvme1n1 does not exist and no size was specified.
ubuntu@ip-172-31-31-141:~$ sudo mkfs.ext4 /nvme1n1
mke2fs 1.47.0 (5-Feb-2023)
The file /nvme1n1 does not exist and no size was specified.
ubuntu@ip-172-31-31-141:~$ sudo mkfs.ext4 /dev/xvdf
mke2fs 1.47.0 (5-Feb-2023)
The file /dev/xvdf does not exist and no size was specified.
ubuntu@ip-172-31-31-141:~$ sudo mkfs -t ext4  /dev/xvdf
mke2fs 1.47.0 (5-Feb-2023)
The file /dev/xvdf does not exist and no size was specified.
ubuntu@ip-172-31-31-141:~$ sudo mkfs -t ext4  /dev/nvme1n1
mke2fs 1.47.0 (5-Feb-2023)
Creating filesystem with 26214400 4k blocks and 6553600 inodes
Filesystem UUID: 9c230ddf-6cff-4fc1-bf3f-daa21b396dcd
Superblock backups stored on blocks:
        32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632, 2654208,
        4096000, 7962624, 11239424, 20480000, 23887872

Allocating group tables: done
Writing inode tables: done
Creating journal (131072 blocks): done
Writing superblocks and filesystem accounting information: done

ubuntu@ip-172-31-31-141:~$ sudo mkdir /data
ubuntu@ip-172-31-31-141:~$ sudo mount /dev/nvme1n1   /data
ubuntu@ip-172-31-31-141:~$ sudo chown ubuntu:ubuntu /data
ubuntu@ip-172-31-31-141:~$ sudo mkdir -p /etc/nix
ubuntu@ip-172-31-31-141:~$ cat <<EOF | sudo tee /etc/nix/nix.conf
substituters = https://cache.nixos.org https://hydra.iohk.io https://iohk.cachix.org
trusted-public-keys = cache.nixos.org-1:6NCHdD59X431o0gWypbMrAURkbJ16ZPMQFGspcDShjY= hydra.iohk.io:f/Ea+s+dFdN+3Y/G+FDgSq+a5NEWhJGzdjvKNGv0/EQ= iohk.cachix.org-1:DpRUyj7h7V830dp/i6Nti+NEO2/nhblbov/8MW7Rqoo=
EOF
substituters = https://cache.nixos.org https://hydra.iohk.io https://iohk.cachix.org
trusted-public-keys = cache.nixos.org-1:6NCHdD59X431o0gWypbMrAURkbJ16ZPMQFGspcDShjY= hydra.iohk.io:f/Ea+s+dFdN+3Y/G+FDgSq+a5NEWhJGzdjvKNGv0/EQ= iohk.cachix.org-1:DpRUyj7h7V830dp/i6Nti+NEO2/nhblbov/8MW7Rqoo=
ubuntu@ip-172-31-31-141:~$ mkdir /data/nix
ubuntu@ip-172-31-31-141:~$ sudo ln -s /data/nix /nix
ubuntu@ip-172-31-31-141:~$ echo "export NIX_IGNORE_SYMLINK_STORE=1" >> ~/.bashrc
ubuntu@ip-172-31-31-141:~$ source ~/.bashrc
ubuntu@ip-172-31-31-141:~$
curl -L https://nixos.org/nix/install | sh
. /home/ubuntu/.nix-profile/etc/profile.d/nix.sh
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
100  4267  100  4267    0     0  11398      0 --:--:-- --:--:-- --:--:-- 11398
downloading Nix 2.23.3 binary tarball for x86_64-linux from 'https://releases.nixos.org/nix/nix-2.23.3/nix-2.23.3-x86_64-linux.tar.xz' to '/tmp/nix-binary-tarball-unpack.2YayN2Z2go'...
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100 21.9M  100 21.9M    0     0   117M      0 --:--:-- --:--:-- --:--:--  118M
Note: a multi-user installation is possible. See https://nixos.org/manual/nix/stable/installation/installing-binary.html#multi-user-installation
performing a single-user installation of Nix...
copying Nix to /nix/store...

installing 'nix-2.23.3'
error: path '/nix' is a symlink
/tmp/nix-binary-tarball-unpack.2YayN2Z2go/unpack/nix-2.23.3-x86_64-linux/install: unable to install Nix into your default profile
-bash: /home/ubuntu/.nix-profile/etc/profile.d/nix.sh: No such file or directory
ubuntu@ip-172-31-31-141:~$ cd /data
ubuntu@ip-172-31-31-141:/data$ git clone https://github.com/input-output-hk/cardano-node
Cloning into 'cardano-node'...
remote: Enumerating objects: 122555, done.
remote: Counting objects: 100% (8711/8711), done.
remote: Compressing objects: 100% (3324/3324), done.
remote: Total 122555 (delta 6249), reused 7379 (delta 5309), pack-reused 113844
Receiving objects: 100% (122555/122555), 107.42 MiB | 15.72 MiB/s, done.
Resolving deltas: 100% (79918/79918), done.
ubuntu@ip-172-31-31-141:/data$ cd cardano-node
ubuntu@ip-172-31-31-141:/data/cardano-node$ git checkout tags/1.29.0 -b 1_29_0
Switched to a new branch '1_29_0'
ubuntu@ip-172-31-31-141:/data/cardano-node$ nix-build -A scripts.alonzo-purple.node -o result/alonzo-purple/cardano-node-alonzo-purple
Command 'nix-build' not found, but can be installed with:
sudo apt install nix-bin
ubuntu@ip-172-31-31-141:/data/cardano-node$
sudo apt install nix-bin
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
E: Unable to locate package nix-bin
ubuntu@ip-172-31-31-141:/data/cardano-node$ sudu apt install nix-bin
Command 'sudu' not found, did you mean:
  command 'sudo' from deb sudo (1.9.14p2-1ubuntu1)
  command 'sudo' from deb sudo-ldap (1.9.14p2-1ubuntu1)
  command 'tudu' from deb tudu (0.10.4-2)
Try: sudo apt install <deb name>
ubuntu@ip-172-31-31-141:/data/cardano-node$ sudo apt install nix-bin
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
E: Unable to locate package nix-bin
ubuntu@ip-172-31-31-141:/data/cardano-node$  apt install nix-bin
E: Could not open lock file /var/lib/dpkg/lock-frontend - open (13: Permission denied)
E: Unable to acquire the dpkg frontend lock (/var/lib/dpkg/lock-frontend), are you root?
ubuntu@ip-172-31-31-141:/data/cardano-node$ sudo apt install nix-bin
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
E: Unable to locate package nix-bin
ubuntu@ip-172-31-31-141:/data/cardano-node$ sudo apt install nix
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
E: Unable to locate package nix
ubuntu@ip-172-31-31-141:/data/cardano-node$ curl -L https://nixos.org/nix/install | sh
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
100  4267  100  4267    0     0  11294      0 --:--:-- --:--:-- --:--:-- 11294
downloading Nix 2.23.3 binary tarball for x86_64-linux from 'https://releases.nixos.org/nix/nix-2.23.3/nix-2.23.3-x86_64-linux.tar.xz' to '/tmp/nix-binary-tarball-unpack.hviG1T1J0H'...
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100 21.9M  100 21.9M    0     0   131M      0 --:--:-- --:--:-- --:--:--  132M
Note: a multi-user installation is possible. See https://nixos.org/manual/nix/stable/installation/installing-binary.html#multi-user-installation
performing a single-user installation of Nix...
copying Nix to /nix/store...

installing 'nix-2.23.3'
error: path '/nix' is a symlink
/tmp/nix-binary-tarball-unpack.hviG1T1J0H/unpack/nix-2.23.3-x86_64-linux/install: unable to install Nix into your default profile
ubuntu@ip-172-31-31-141:/data/cardano-node$ cd ..
ubuntu@ip-172-31-31-141:/data$ ls
cardano-node  lost+found  nix
ubuntu@ip-172-31-31-141:/data$ cd nix
ubuntu@ip-172-31-31-141:/data/nix$ curl -L https://nixos.org/nix/install | sh
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
100  4267  100  4267    0     0  13006      0 --:--:-- --:--:-- --:--:-- 13006
downloading Nix 2.23.3 binary tarball for x86_64-linux from 'https://releases.nixos.org/nix/nix-2.23.3/nix-2.23.3-x86_64-linux.tar.xz' to '/tmp/nix-binary-tarball-unpack.uG7rDZlF9T'...
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100 21.9M  100 21.9M    0     0   152M      0 --:--:-- --:--:-- --:--:--  152M
Note: a multi-user installation is possible. See https://nixos.org/manual/nix/stable/installation/installing-binary.html#multi-user-installation
performing a single-user installation of Nix...
copying Nix to /nix/store...

installing 'nix-2.23.3'
error: path '/nix' is a symlink
/tmp/nix-binary-tarball-unpack.uG7rDZlF9T/unpack/nix-2.23.3-x86_64-linux/install: unable to install Nix into your default profile
ubuntu@ip-172-31-31-141:/data/nix$





#### skip the symbolic link: 

The programs included with the Ubuntu system are free software;
the exact distribution terms for each program are described in the
individual files in /usr/share/doc/*/copyright.

Ubuntu comes with ABSOLUTELY NO WARRANTY, to the extent permitted by
applicable law.

To run a command as administrator (user "root"), use "sudo <command>".
See "man sudo_root" for details.

ubuntu@ip-172-31-30-216:~$ ls
ubuntu@ip-172-31-30-216:~$ pwd
/home/ubuntu
ubuntu@ip-172-31-30-216:~$ lsblk
NAME         MAJ:MIN RM  SIZE RO TYPE MOUNTPOINTS
loop0          7:0    0 25.2M  1 loop /snap/amazon-ssm-agent/7993
loop1          7:1    0 55.7M  1 loop /snap/core18/2829
loop2          7:2    0 38.8M  1 loop /snap/snapd/21759
nvme0n1      259:0    0    8G  0 disk
├─nvme0n1p1  259:2    0    7G  0 part /
├─nvme0n1p14 259:3    0    4M  0 part
├─nvme0n1p15 259:4    0  106M  0 part /boot/efi
└─nvme0n1p16 259:5    0  913M  0 part /boot
nvme1n1      259:1    0  100G  0 disk
ubuntu@ip-172-31-30-216:~$ sudo mkfs.ext4 /nvme1n1
mke2fs 1.47.0 (5-Feb-2023)
The file /nvme1n1 does not exist and no size was specified.
ubuntu@ip-172-31-30-216:~$ sudo mkfs -t ext4  /dev/nvme1n1
mke2fs 1.47.0 (5-Feb-2023)
Creating filesystem with 26214400 4k blocks and 6553600 inodes
Filesystem UUID: 2d3f0b70-8808-4305-8d69-acd95f0abb52
Superblock backups stored on blocks:
        32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632, 2654208,
        4096000, 7962624, 11239424, 20480000, 23887872

Allocating group tables: done
Writing inode tables: done
Creating journal (131072 blocks): done
Writing superblocks and filesystem accounting information: done

ubuntu@ip-172-31-30-216:~$ sudo mkdir /data
ubuntu@ip-172-31-30-216:~$ cd /data
ubuntu@ip-172-31-30-216:/data$ mkdir nix
mkdir: cannot create directory ‘nix’: Permission denied
ubuntu@ip-172-31-30-216:/data$ sudo mkdir nix
ubuntu@ip-172-31-30-216:/data$ sudo mount /dev/nvme1n1  /data/nix
ubuntu@ip-172-31-30-216:/data$ sudo mkir  -p   /etc/nix
sudo: mkir: command not found
ubuntu@ip-172-31-30-216:/data$ sudo mkdir  -p   /etc/nix
ubuntu@ip-172-31-30-216:/data$ cd ~ubuntu
ubuntu@ip-172-31-30-216:~$ ls
ubuntu@ip-172-31-30-216:~$ cat <<EOF | sudo tee /etc/nix/nix.conf
substituters = https://cache.nixos.org https://hydra.iohk.io https://iohk.cachix.org
trusted-public-keys = cache.nixos.org-1:6NCHdD59X431o0gWypbMrAURkbJ16ZPMQFGspcDShjY= hydra.iohk.io:f/Ea+s+dFdN+3Y/G+FDgSq+a5NEWhJGzdjvKNGv0/EQ= iohk.cachix.org-1:DpRUyj7h7V830dp/i6Nti+NEO2/nhblbov/8MW7Rqoo=
EOF
substituters = https://cache.nixos.org https://hydra.iohk.io https://iohk.cachix.org
trusted-public-keys = cache.nixos.org-1:6NCHdD59X431o0gWypbMrAURkbJ16ZPMQFGspcDShjY= hydra.iohk.io:f/Ea+s+dFdN+3Y/G+FDgSq+a5NEWhJGzdjvKNGv0/EQ= iohk.cachix.org-1:DpRUyj7h7V830dp/i6Nti+NEO2/nhblbov/8MW7Rqoo=
ubuntu@ip-172-31-30-216:~$ echo "export NIX_IGNORE_SYMLINK_STORE=1" >> ~/.bashrc
ubuntu@ip-172-31-30-216:~$ ls
ubuntu@ip-172-31-30-216:~$ ls -l .bashrc
-rw-r--r-- 1 ubuntu ubuntu 3805 Jul 16 21:49 .bashrc
ubuntu@ip-172-31-30-216:~$ cat -l .bashrc
cat: invalid option -- 'l'
Try 'cat --help' for more information.
ubuntu@ip-172-31-30-216:~$ source ~/.bashrc
ubuntu@ip-172-31-30-216:~$ curl -L https://nixos.org/nix/install | sh
. /home/ubuntu/.nix-profile/etc/profile.d/nix.sh
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
100  4267  100  4267    0     0  13753      0 --:--:-- --:--:-- --:--:-- 13753
downloading Nix 2.23.3 binary tarball for x86_64-linux from 'https://releases.nixos.org/nix/nix-2.23.3/nix-2.23.3-x86_64-linux.tar.xz' to '/tmp/nix-binary-tarball-unpack.XAYhFf2IHR'...
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100 21.9M  100 21.9M    0     0   131M      0 --:--:-- --:--:-- --:--:--  132M
Note: a multi-user installation is possible. See https://nixos.org/manual/nix/stable/installation/installing-binary.html#multi-user-installation
performing a single-user installation of Nix...
directory /nix does not exist; creating it by running 'mkdir -m 0755 /nix && chown ubuntu /nix' using sudo
copying Nix to /nix/store...

installing 'nix-2.23.3'
building '/nix/store/nqg8iwgvcln6k0yi2y05rziibyc33fyn-user-environment.drv'...
unpacking 1 channels...
warning: 'https://hydra.iohk.io' does not appear to be a binary cache
modifying /home/ubuntu/.profile...

Installation finished!  To ensure that the necessary environment
variables are set, either log in again, or type

  . /home/ubuntu/.nix-profile/etc/profile.d/nix.sh

in your shell.
ubuntu@ip-172-31-30-216:~$

















